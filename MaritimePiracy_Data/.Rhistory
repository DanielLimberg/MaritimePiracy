polity <- read.csv("p4v2014.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE, na.strings = c("", "NA")) #polity iv project
##############################################
##############################################
# Merge Test 2 - Merge Test 2 - Merge Test 2 #
##############################################
##############################################
#Import the dataset about piracy incidentss into your wd
#Call libraries we need for the project, make sure you have them installed
library(base)
library(rio) #swiss army knife for imports
library(plyr) #command ddply
library(dplyr) #data wrangling
library(tidyr) #data wrangling
library(ggplot2) #nice plots
library(stargazer) #nicer regression output which looks like a real publication
library(car) #scatterplots
library(httr) #scraping from http sites
library(XML) #tool for generating XML file
library(WDI) #scraping Data from the World Bank
library(countrycode) #provides world bank country codes
library(Amelia) #eyeballing missing values
library(tidyr) #reshaping
library(plm) #fixed and random effects models
library(stringr)
library(sjPlot) #makes nice graphs, see: http://strengejacke.de/sjPlot/
library(foreign)
library(MASS)
library(aod)
library(Rcpp)
library(XML)
library(RCurl)
#set working directories if necessary (if data lies in git repo it is not necessary though)
try(setwd("E:/bjoer/Documents/GitHub/MaritimePiracyWrangling/Data"),silent=TRUE)
try(setwd("C:/Users/Dani/Documents/GitHub2/MaritimePiracy/MaritimePiracy_Data"),silent=TRUE)
getwd()
####################################
####################################
# Scraping Data from World Bank - BB
####################################
####################################
#get rid of NA for WDI parsing with factor vectors
sea0 <- read.csv("sealine.csv", header = TRUE, sep = ";", stringsAsFactors = TRUE, na.strings = c("", "NA"))
#deleting row 172 containing United States Pacific Island Wildlife Refuges whose ISO2 code is also US (and NAs)
#country names in ISO2
cc <- unique(na.omit(sea0)$country)
sea0$iso2c <- countrycode(cc, "country.name", "iso2c")
cc <- sea0$iso2c[!duplicated(sea0$iso2c)]
iso <- sea0$iso2c[!duplicated(sea0$iso2c)]
#parsing desired data from World Bank
allWDI <- WDI(iso, indicator = c("SL.UEM.TOTL.ZS", #unem.total (4th column)
"SL.UEM.1524.ZS", #unem.y
"SL.UEM.1524.MA.ZS", #unem.y.m
"NY.GDP.MKTP.KD", #GDP,total (constant 2005 USD)
"SP.POP.TOTL", #Population, total
"IT.CEL.SETS", #mobile
"IT.CEL.SETS.P2", #mobile per 100 people
"SP.POP.GROW", #pop.gr
"SP.RUR.TOTL.ZG", #poprur.gr
"SP.URB.GROW", #popurb.gr
"SH.DYN.MORT", #child mortatlity <5 yrs per 1000
"IQ.CPA.PROP.XQ", #property rights and rule-based governance rating
"SL.AGR.EMPL.ZS", #empl.agrar
"SI.POV.GINI", #gini
"NY.GNP.PCAP.KD", #GNIpc, constant 2005 USD
"CC.PER.RNK"), #Control of Corruption: Percentile Rank (19th column)
start=1993, end=2014)
missmap(allWDI) #eyeballing missing data
names(allWDI)[4] <- 'unem.total'
names(allWDI)[5] <- 'unem.y'
names(allWDI)[6] <- 'unem.y.m'
names(allWDI)[7] <- 'GDP'
names(allWDI)[8] <- 'pop.total'
names(allWDI)[9] <- 'mobile'
names(allWDI)[10] <- 'mobilep100'
names(allWDI)[11] <- 'pop.gr'
names(allWDI)[12] <- 'poprur.gr'
names(allWDI)[13] <- 'popurb.gr'
names(allWDI)[14] <- 'cmort'
names(allWDI)[15] <- 'property'
names(allWDI)[16] <- 'empl.agrar'
names(allWDI)[17] <- 'gini'
names(allWDI)[18] <- 'GNIpc'
names(allWDI)[19] <- 'corruption'
View(allWDI)
summary(allWDI$corruption)
library(RJSONIO)
library(WDI)
WDI_search <- WDIsearch(string = "corruption", field = "name", short = TRUE, cache = NULL)
View(WDI_search)
WDI_search <- WDIsearch(string = "Income", field = "name", short = TRUE, cache = NULL)
View(WDI_search)
##############################################
##############################################
# Merge Test 2 - Merge Test 2 - Merge Test 2 #
##############################################
##############################################
#Import the dataset about piracy incidentss into your wd
#Call libraries we need for the project, make sure you have them installed
library(base)
library(rio) #swiss army knife for imports
library(plyr) #command ddply
library(dplyr) #data wrangling
library(tidyr) #data wrangling
library(ggplot2) #nice plots
library(stargazer) #nicer regression output which looks like a real publication
library(car) #scatterplots
library(httr) #scraping from http sites
library(XML) #tool for generating XML file
library(WDI) #scraping Data from the World Bank
library(countrycode) #provides world bank country codes
library(Amelia) #eyeballing missing values
library(tidyr) #reshaping
library(plm) #fixed and random effects models
library(stringr)
library(sjPlot) #makes nice graphs, see: http://strengejacke.de/sjPlot/
library(foreign)
library(MASS)
library(aod)
library(Rcpp)
library(XML)
library(RCurl)
#set working directories if necessary (if data lies in git repo it is not necessary though)
try(setwd("E:/bjoer/Documents/GitHub/MaritimePiracyWrangling/Data"),silent=TRUE)
try(setwd("C:/Users/Dani/Documents/GitHub2/MaritimePiracy/MaritimePiracy_Data"),silent=TRUE)
getwd()
####################################
####################################
# Scraping Data from World Bank - BB
####################################
####################################
#get rid of NA for WDI parsing with factor vectors
sea0 <- read.csv("sealine.csv", header = TRUE, sep = ";", stringsAsFactors = TRUE, na.strings = c("", "NA"))
#deleting row 172 containing United States Pacific Island Wildlife Refuges whose ISO2 code is also US (and NAs)
#country names in ISO2
cc <- unique(na.omit(sea0)$country)
sea0$iso2c <- countrycode(cc, "country.name", "iso2c")
cc <- sea0$iso2c[!duplicated(sea0$iso2c)]
iso <- sea0$iso2c[!duplicated(sea0$iso2c)]
#parsing desired data from World Bank
allWDI <- WDI(iso, indicator = c("SL.UEM.TOTL.ZS", #unem.total (4th column)
"SL.UEM.1524.ZS", #unem.y
"SL.UEM.1524.MA.ZS", #unem.y.m
"NY.GDP.MKTP.KD", #GDP,total (constant 2005 USD)
"SP.POP.TOTL", #Population, total
"IT.CEL.SETS", #mobile
"IT.CEL.SETS.P2", #mobile per 100 people
"SP.RUR.TOTL.ZG", #poprur.gr
"SP.URB.GROW", #popurb.gr
"SH.DYN.MORT", #child mortatlity <5 yrs per 1000
"IQ.CPA.PROP.XQ", #property rights and rule-based governance rating
"SL.AGR.EMPL.ZS", #empl.agrar
"SI.POV.GINI", #gini
"NY.GNY.TOTL.KD", #GNI, total (constant 2000 USD)
"CC.PER.RNK"), #Control of Corruption: Percentile Rank (18th column)
start=1993, end=2014)
missmap(allWDI) #eyeballing missing data
summary(allWDI$NY.GNY.TOTL.KD)
WDI_search <- WDIsearch(string = "GNI", field = "name", short = TRUE, cache = NULL)
View(WDI_search)
WDI_search <- WDIsearch(string = "gross domestic product", field = "name", short = TRUE, cache = NULL)
View(WDI_search)
WDI_search <- WDIsearch(string = "GDP", field = "name", short = TRUE, cache = NULL)
View(WDI_search)
